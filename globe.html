<!DOCTYPE html>
<html class="dark" lang="ko">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>AirLens Policy Globe - ÏÑ∏Í≥Ñ ÎåÄÍ∏∞Ïßà Ï†ïÏ±Ö ÏßÄÍµ¨Î≥∏</title>
    <meta name="description" content="Ï†Ñ ÏÑ∏Í≥Ñ ÎåÄÍ∏∞Ïßà Ï†ïÏ±ÖÍ≥º Í∑úÏ†úÎ•º Ïù∏ÌÑ∞ÎûôÌã∞Î∏å 3D ÏßÄÍµ¨Î≥∏ÏóêÏÑú ÌÉêÏÉâÌïòÏÑ∏Ïöî"/>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>

    <!-- Three.js -->
    <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
      }
    }
    </script>

    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Main Styles -->
    <link rel="stylesheet" href="css/main.css"/>
    <link rel="stylesheet" href="css/settings.css"/>

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#25e2f4",
                        "background-light": "#f5f8f8",
                        "background-dark": "#102122",
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>

    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            font-size: 24px;
        }

        #globe-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #000005 0%, #0a0e1a 100%);
        }

        #globe-canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .toggle-switch {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            width: 51px;
            height: 31px;
            cursor: pointer;
            border-radius: 9999px;
            border: none;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 2px;
            transition: background-color 0.3s, justify-content 0.3s;
        }

        .toggle-switch.checked {
            background-color: #25e2f4;
            justify-content: flex-end;
        }

        .toggle-knob {
            width: 27px;
            height: 27px;
            border-radius: 50%;
            background-color: white;
            box-shadow: rgba(0, 0, 0, 0.15) 0px 3px 8px, rgba(0, 0, 0, 0.06) 0px 3px 1px;
        }

        .toggle-switch input {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .policy-card {
            animation: slideInUp 0.3s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .news-item {
            transition: all 0.2s;
        }

        .news-item:hover {
            transform: translateX(4px);
            background-color: rgba(255, 255, 255, 0.05);
        }

        /* Custom Scrollbar for Policy Card */
        #policy-card .overflow-y-auto::-webkit-scrollbar {
            width: 6px;
        }

        #policy-card .overflow-y-auto::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        #policy-card .overflow-y-auto::-webkit-scrollbar-thumb {
            background: rgba(37, 226, 244, 0.3);
            border-radius: 10px;
        }

        #policy-card .overflow-y-auto::-webkit-scrollbar-thumb:hover {
            background: rgba(37, 226, 244, 0.5);
        }

        @media (max-width: 768px) {
            .control-panel {
                max-width: 90vw !important;
            }

            .info-panel {
                max-width: 90vw !important;
            }

            #policy-card {
                max-width: calc(100vw - 1rem) !important;
                max-height: calc(100vh - 140px) !important;
            }

            main {
                flex-direction: column !important;
            }

            main > div {
                padding: 0.5rem !important;
                padding-top: 3rem !important;
            }

            .control-panel {
                top: 4rem !important;
                max-height: calc(100vh - 140px) !important;
            }
        }

        /* Transparent navbar for globe page */
        .navbar-transparent {
            background: transparent !important;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            border-bottom: none;
            z-index: 1000 !important;
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark">
    <!-- Dark Mode Toggle Button -->
    <div class="theme-toggle-container">
        <div class="toggle-cont">
            <input class="toggle-input" id="theme-toggle" name="toggle" type="checkbox" />
            <label class="toggle-label" for="theme-toggle">
                <div class="cont-icon">
                    <span style="--sparkle-width: 2; --sparkle-deg: 25; --sparkle-duration: 11" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 100; --sparkle-duration: 18" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 280; --sparkle-duration: 5" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 200; --sparkle-duration: 3" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 30; --sparkle-duration: 20" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 300; --sparkle-duration: 9" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 250; --sparkle-duration: 4" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 210; --sparkle-duration: 8" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 100; --sparkle-duration: 9" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 15; --sparkle-duration: 13" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 75; --sparkle-duration: 18" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 65; --sparkle-duration: 6" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 50; --sparkle-duration: 7" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 320; --sparkle-duration: 5" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 220; --sparkle-duration: 5" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 215; --sparkle-duration: 2" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 135; --sparkle-duration: 9" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 45; --sparkle-duration: 4" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 78; --sparkle-duration: 16" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 89; --sparkle-duration: 19" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 65; --sparkle-duration: 14" class="sparkle"></span>
                    <span style="--sparkle-width: 2; --sparkle-deg: 97; --sparkle-duration: 1" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 174; --sparkle-duration: 10" class="sparkle"></span>
                    <span style="--sparkle-width: 1; --sparkle-deg: 236; --sparkle-duration: 5" class="sparkle"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 30 30" class="icon">
                        <path d="M0.96233 28.61C1.36043 29.0081 1.96007 29.1255 2.47555 28.8971L10.4256 25.3552C13.2236 24.11 16.4254 24.1425 19.2107 25.4401L27.4152 29.2747C27.476 29.3044 27.5418 29.3023 27.6047 29.32C27.6563 29.3348 27.7079 29.3497 27.761 29.3574C27.843 29.3687 27.9194 29.3758 28 29.3688C28.1273 29.3617 28.2531 29.3405 28.3726 29.2945C28.4447 29.262 28.5162 29.2287 28.5749 29.1842C28.6399 29.1446 28.6993 29.0994 28.7509 29.0477L28.9008 28.8582C28.9468 28.7995 28.9793 28.7274 29.0112 28.656C29.0599 28.5322 29.0811 28.4036 29.0882 28.2734C29.0939 28.1957 29.0868 28.1207 29.0769 28.0415C29.0705 27.9955 29.0585 27.9524 29.0472 27.9072C29.0295 27.8343 29.0302 27.7601 28.9984 27.6901L25.1638 19.4855C23.8592 16.7073 23.8273 13.5048 25.0726 10.7068L28.6145 2.75679C28.8429 2.24131 28.7318 1.63531 28.3337 1.2372C27.9165 0.820011 27.271 0.721743 26.7491 0.9961L19.8357 4.59596C16.8418 6.15442 13.2879 6.18696 10.2615 4.70062L1.80308 0.520214C1.7055 0.474959 1.60722 0.441742 1.50964 0.421943C1.44459 0.409215 1.37882 0.395769 1.3074 0.402133C1.14406 0.395769 0.981436 0.428275 0.818095 0.499692C0.77284 0.519491 0.719805 0.545671 0.67455 0.578198C0.596061 0.617088 0.524653 0.675786 0.4596 0.74084C0.394546 0.805894 0.335843 0.877306 0.296245 0.956502C0.263718 1.00176 0.237561 1.05477 0.217762 1.10003C0.152708 1.24286 0.126545 1.40058 0.120181 1.54978C0.120181 1.61483 0.126527 1.6735 0.132891 1.73219C0.15269 1.85664 0.178881 1.97332 0.237571 2.08434L4.41798 10.5427C5.91139 13.5621 5.8725 17.1238 4.3204 20.1099L0.720514 27.0233C0.440499 27.5536 0.545137 28.1928 0.96233 28.61Z" />
                    </svg>
                </div>
            </label>
        </div>
    </div>

    <!-- Transparent Navigation Bar -->
    <nav class="navbar navbar-transparent">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">AirLens</a>
            <button class="navbar-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="navbar-menu">
                <li><a href="index.html" class="navbar-link">Home</a></li>
                <li><a href="globe.html" class="navbar-link navbar-link-active">Globe</a></li>
                <li><a href="camera.html" class="navbar-link">Camera AI</a></li>
                <li><a href="research.html" class="navbar-link">Research</a></li>
                <li><a href="about.html" class="navbar-link">About</a></li>
                <li><a href="settings.html" class="navbar-link">
                    <div class="settings-icon">
                        <div class="loader-icon"></div>
                    </div>
                </a></li>
            </ul>
        </div>
    </nav>

    <div class="relative flex h-screen w-full flex-col overflow-hidden">

        <!-- 3D Globe Background -->
        <div id="globe-container">
            <canvas id="globe-canvas"></canvas>

            <!-- Loading Indicator -->
            <div id="loading-indicator" class="absolute inset-0 flex items-center justify-center bg-background-dark/80 backdrop-blur-sm z-50">
                <div class="flex flex-col items-center gap-4">
                    <div class="w-16 h-16 border-4 border-primary/30 border-t-primary rounded-full animate-spin"></div>
                    <p class="text-white text-lg font-medium">Loading Globe...</p>
                </div>
            </div>
        </div>

        <main class="relative z-20 flex flex-1 pointer-events-none">

            <!-- Left Side - Policy Cards & Stats -->
            <div class="pointer-events-auto flex flex-col justify-start gap-4 p-2 md:p-4 max-h-screen overflow-y-auto pt-16">

                <!-- Country Policy Card -->
                <div class="flex justify-start">
                    <div id="policy-card" class="w-full max-w-[240px] max-h-[calc(100vh-180px)] rounded-xl bg-gray-900/50 backdrop-blur-md border border-white/10 policy-card flex flex-col" style="display: none;">
                        <div class="flex items-start justify-between p-4 pb-3 border-b border-white/10 flex-shrink-0">
                            <div class="flex-1">
                                <div class="flex items-center gap-3 mb-1">
                                    <span id="policy-flag" class="text-3xl">üåç</span>
                                    <div>
                                        <h3 class="text-lg font-bold text-white" id="policy-country">Country</h3>
                                        <p class="text-xs text-white/60" id="policy-region">Region</p>
                                    </div>
                                </div>
                            </div>
                            <button onclick="document.getElementById('policy-card').style.display='none'"
                                    class="text-white/60 hover:text-white transition-colors">
                                <span class="material-symbols-outlined">close</span>
                            </button>
                        </div>

                        <!-- Policy Info (Scrollable) -->
                        <div class="px-4 py-3 overflow-y-auto flex-1 min-h-0" style="scrollbar-width: thin; scrollbar-color: rgba(37, 226, 244, 0.5) rgba(0, 0, 0, 0.2);">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="material-symbols-outlined text-primary !text-lg">policy</span>
                                <h4 class="text-sm font-semibold text-white">Main Policy</h4>
                            </div>
                            <div class="bg-black/20 rounded-lg p-3 mb-3">
                                <h5 class="text-base font-bold text-primary mb-1" id="policy-name">Policy Name</h5>
                                <p class="text-xs text-white/80 mb-2" id="policy-desc">Policy description goes here...</p>
                                <div class="flex items-center gap-2 text-xs text-white/60">
                                    <span class="material-symbols-outlined !text-sm">calendar_today</span>
                                    <span id="policy-date">Implementation date</span>
                                </div>
                            </div>

                            <!-- Divider -->
                            <div class="my-3 border-t border-white/10"></div>

                            <!-- AQI Status -->
                            <div class="grid grid-cols-2 gap-2 mb-3">
                                <div class="bg-black/20 rounded-lg p-3 text-center">
                                    <p class="text-xs text-white/60 mb-1">Current AQI</p>
                                    <p class="text-2xl font-bold" id="policy-aqi">-</p>
                                </div>
                                <div class="bg-black/20 rounded-lg p-3 text-center">
                                    <p class="text-xs text-white/60 mb-1">PM2.5</p>
                                    <p class="text-2xl font-bold" id="policy-pm25">- ¬µg/m¬≥</p>
                                </div>
                            </div>

                            <!-- Divider -->
                            <div class="my-2 border-t border-white/10"></div>

                            <!-- Policy Impact Analysis -->
                            <div class="mb-2" id="policy-impact-section" style="display: none;">
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="material-symbols-outlined text-primary !text-lg">analytics</span>
                                    <h4 class="text-sm font-semibold text-white">Policy Impact</h4>
                                </div>
                                <div class="bg-black/20 rounded-lg p-2">
                                    <!-- Visual Comparison Chart -->
                                    <div class="mb-1">
                                        <canvas id="policy-impact-chart" style="max-height: 70px;"></canvas>
                                    </div>

                                    <!-- Numeric Summary -->
                                    <div class="grid grid-cols-3 gap-2 mb-1">
                                        <div class="text-center">
                                            <p class="text-xs text-white/60 mb-0.5">Before</p>
                                            <p class="text-sm font-bold text-white/90" id="impact-before">-</p>
                                        </div>
                                        <div class="text-center">
                                            <p class="text-xs text-white/60 mb-0.5">After</p>
                                            <p class="text-sm font-bold text-white/90" id="impact-after">-</p>
                                        </div>
                                        <div class="text-center">
                                            <p class="text-xs text-white/60 mb-0.5">Change</p>
                                            <p class="text-sm font-bold" id="impact-change">-</p>
                                        </div>
                                    </div>
                                    <div class="text-xs text-white/60 text-center" id="impact-significance">
                                        Statistical analysis loading...
                                    </div>
                                </div>
                            </div>

                            <!-- Policy Timeline -->
                            <div class="mb-2" id="policy-timeline-section" style="display: none;">
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="material-symbols-outlined text-primary !text-lg">timeline</span>
                                    <h4 class="text-sm font-semibold text-white">Timeline</h4>
                                </div>
                                <div class="bg-black/20 rounded-lg p-2">
                                    <canvas id="policy-timeline-chart" style="max-height: 70px;"></canvas>
                                </div>
                            </div>

                            <!-- Divider -->
                            <div class="my-2 border-t border-white/10"></div>

                            <!-- Recent News -->
                            <div class="mb-2">
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="material-symbols-outlined text-primary !text-lg">newspaper</span>
                                    <h4 class="text-sm font-semibold text-white">Recent News</h4>
                                </div>
                                <div id="policy-news" class="space-y-2">
                                    <!-- News items will be inserted here -->
                                </div>
                            </div>

                            <button id="view-more-btn" class="w-full flex items-center justify-center gap-2 overflow-hidden rounded-lg h-9 px-4 mt-2 bg-primary/20 text-primary text-sm font-bold leading-normal tracking-[0.015em] hover:bg-primary/30 transition-colors">
                                <span class="material-symbols-outlined !text-base">open_in_new</span>
                                <span class="truncate">View Full Details</span>
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Right Control Panel -->
            <aside class="pointer-events-auto fixed top-20 bottom-6 right-6 flex w-full max-w-[240px] flex-col gap-2 rounded-xl bg-gray-900/50 p-3 backdrop-blur-md border border-white/10 overflow-y-auto control-panel max-h-[calc(100vh-104px)] z-30">

                <!-- Header -->
                <div class="flex flex-col">
                    <h1 class="text-white text-sm font-medium leading-tight">Policy Explorer</h1>
                    <p class="text-white/60 text-xs font-normal leading-tight">Explore policies worldwide</p>
                </div>

                <!-- Global Statistics -->
                <div class="mt-2 p-3 bg-black/20 rounded-lg border border-white/10">
                    <h4 class="text-xs font-bold text-white mb-2">Global Statistics</h4>
                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <p class="text-xs text-white/60">Countries</p>
                            <p id="stat-countries" class="text-lg font-bold text-primary">-</p>
                        </div>
                        <div>
                            <p class="text-xs text-white/60">Policies</p>
                            <p id="stat-policies" class="text-lg font-bold text-primary">-</p>
                        </div>
                        <div>
                            <p class="text-xs text-white/60">Regions</p>
                            <p id="stat-regions" class="text-lg font-bold text-primary">-</p>
                        </div>
                        <div>
                            <p class="text-xs text-white/60">Updates</p>
                            <p class="text-lg font-bold text-primary">Live</p>
                        </div>
                    </div>
                </div>

                <!-- Search & Filters -->
                <div class="flex flex-col gap-2">
                    <label class="flex flex-col h-9 w-full">
                        <div class="flex w-full flex-1 items-stretch rounded-lg h-full">
                            <div class="text-white/60 flex border-none bg-black/20 items-center justify-center pl-2 rounded-l-lg border-r-0">
                                <span class="material-symbols-outlined !text-base">search</span>
                            </div>
                            <input id="country-search"
                                   class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-0 border-none bg-black/20 focus:border-none h-full placeholder:text-white/60 px-2 rounded-l-none border-l-0 pl-1 text-sm font-normal leading-normal"
                                   placeholder="Search..."
                                   value=""/>
                        </div>
                    </label>

                    <div class="flex gap-1.5 flex-wrap">
                        <button id="filter-region" class="flex h-7 shrink-0 items-center justify-center gap-x-1 rounded-lg bg-black/20 pl-2 pr-1 hover:bg-black/40 transition-colors">
                            <p class="text-white text-xs font-medium leading-normal">Region</p>
                            <span class="material-symbols-outlined text-white !text-base">arrow_drop_down</span>
                        </button>
                        <button id="filter-policy" class="flex h-7 shrink-0 items-center justify-center gap-x-1 rounded-lg bg-black/20 pl-2 pr-1 hover:bg-black/40 transition-colors">
                            <p class="text-white text-xs font-medium leading-normal">Type</p>
                            <span class="material-symbols-outlined text-white !text-base">arrow_drop_down</span>
                        </button>
                    </div>
                </div>

                <div class="my-1 border-t border-white/10"></div>

                <!-- Visualization Layers -->
                <div class="flex flex-col gap-1">
                    <div class="flex flex-col mb-1">
                        <h1 class="text-white text-sm font-medium leading-tight">Layers</h1>
                    </div>

                    <!-- Country Borders -->
                    <label class="flex items-center gap-2 bg-transparent px-2 min-h-[48px] py-1 justify-between cursor-pointer hover:bg-white/5 rounded-lg transition-colors">
                        <div class="flex items-center gap-2">
                            <div class="text-white flex items-center justify-center rounded-lg bg-black/20 shrink-0 size-8">
                                <span class="material-symbols-outlined !text-base">flag</span>
                            </div>
                            <div class="flex flex-col justify-center">
                                <p class="text-white text-xs font-medium leading-tight line-clamp-1">Borders</p>
                            </div>
                        </div>
                        <div class="shrink-0">
                            <div class="toggle-switch checked" id="toggle-borders-switch" style="width: 40px; height: 24px;">
                                <input type="checkbox" id="toggle-borders" checked>
                                <div class="toggle-knob" style="width: 20px; height: 20px;"></div>
                            </div>
                        </div>
                    </label>

                    <!-- PM2.5 Overlay -->
                    <label class="flex items-center gap-2 bg-transparent px-2 min-h-[48px] py-1 justify-between cursor-pointer hover:bg-white/5 rounded-lg transition-colors">
                        <div class="flex items-center gap-2">
                            <div class="text-white flex items-center justify-center rounded-lg bg-black/20 shrink-0 size-8">
                                <span class="material-symbols-outlined !text-base">location_on</span>
                            </div>
                            <div class="flex flex-col justify-center">
                                <p class="text-white text-xs font-medium leading-tight line-clamp-1">Air Quality</p>
                            </div>
                        </div>
                        <div class="shrink-0">
                            <div class="toggle-switch checked" id="toggle-pm25-switch" style="width: 40px; height: 24px;">
                                <input type="checkbox" id="toggle-pm25" checked>
                                <div class="toggle-knob" style="width: 20px; height: 20px;"></div>
                            </div>
                        </div>
                    </label>

                    <!-- Atmospheric Flow -->
                    <label class="flex items-center gap-2 bg-transparent px-2 min-h-[48px] py-1 justify-between cursor-pointer hover:bg-white/5 rounded-lg transition-colors">
                        <div class="flex items-center gap-2">
                            <div class="text-white flex items-center justify-center rounded-lg bg-black/20 shrink-0 size-8">
                                <span class="material-symbols-outlined !text-base">air</span>
                            </div>
                            <div class="flex flex-col justify-center">
                                <p class="text-white text-xs font-medium leading-tight line-clamp-1">Flow</p>
                            </div>
                        </div>
                        <div class="shrink-0">
                            <div class="toggle-switch" id="toggle-particles-switch" style="width: 40px; height: 24px;">
                                <input type="checkbox" id="toggle-particles">
                                <div class="toggle-knob" style="width: 20px; height: 20px;"></div>
                            </div>
                        </div>
                    </label>
                </div>

                <div class="my-1 border-t border-white/10"></div>

                <!-- Globe Controls -->
                <div class="flex flex-col gap-1">
                    <div class="flex flex-col mb-1">
                        <h1 class="text-white text-sm font-medium leading-tight">Controls</h1>
                    </div>

                    <!-- Zoom Controls -->
                    <div class="flex gap-1.5">
                        <button id="reset-view" class="flex flex-1 items-center justify-center gap-1 rounded-lg h-8 bg-black/20 hover:bg-black/40 transition-colors">
                            <span class="material-symbols-outlined text-white !text-base">refresh</span>
                            <span class="text-white text-xs font-medium">Reset</span>
                        </button>
                        <button id="zoom-in" class="flex size-8 items-center justify-center rounded-lg bg-black/20 hover:bg-black/40 transition-colors">
                            <span class="material-symbols-outlined text-white !text-base">add</span>
                        </button>
                        <button id="zoom-out" class="flex size-8 items-center justify-center rounded-lg bg-black/20 hover:bg-black/40 transition-colors">
                            <span class="material-symbols-outlined text-white !text-base">remove</span>
                        </button>
                    </div>

                    <!-- Real-time Data Refresh -->
                    <div class="mt-2">
                        <button id="refresh-data" class="w-full flex items-center justify-center gap-1 rounded-lg h-8 bg-primary/20 hover:bg-primary/30 transition-colors">
                            <span class="material-symbols-outlined text-primary !text-base" id="refresh-icon">sync</span>
                            <span class="text-primary text-xs font-medium">Update Air Quality</span>
                        </button>
                        <div id="last-update" class="text-center text-white/40 text-[10px] mt-1">
                            Click to update
                        </div>
                    </div>
                </div>

            </aside>

        </main>

        <!-- Help Tooltip -->
        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 z-30 pointer-events-none">
            <div class="bg-gray-900/90 backdrop-blur-md border border-white/10 rounded-lg px-4 py-2 text-sm text-white/80">
                <span class="material-symbols-outlined !text-base inline-block align-middle mr-2">touch_app</span>
                Click on markers to explore air quality policies by country
            </div>
        </div>

    </div>

    <!-- JavaScript -->
    <script src="js/theme-toggle.js"></script>
    <script src="js/main.js"></script>
    <script src="js/air-quality-api.js"></script>
    <script type="module" src="js/globe.js"></script>

</body>
</html>
