<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AirLens Globe - Interactive 3D visualization of global air quality data with PM2.5 monitoring">
    <title>AirLens Globe - Real-time Air Quality Visualization</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/globe.css">
    <link rel="stylesheet" href="css/settings.css">

    <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
      }
    }
    </script>
</head>
<body class="globe-body">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">üåç AirLens</a>
            <button class="navbar-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="navbar-menu">
                <li><a href="index.html" class="navbar-link">Home</a></li>
                <li><a href="globe.html" class="navbar-link active">Globe</a></li>
                <li><a href="camera.html" class="navbar-link">Camera AI</a></li>
                <li><a href="research.html" class="navbar-link">Research</a></li>
                <li><a href="about.html" class="navbar-link">About</a></li>
                <li><a href="settings.html" class="navbar-link">
                    <div class="settings-icon">
                        <div class="loader-icon"></div>
                    </div>
                </a></li>
            </ul>
        </div>
    </nav>

    <!-- Globe Container -->
    <div id="globe-container">
        <!-- 3D Canvas -->
        <canvas id="globe-canvas"></canvas>
        
        <!-- Loading Screen -->
        <div id="loading-screen">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p class="loading-text">Initializing Earth...</p>
            </div>
        </div>
        
        <!-- Left Sidebar Menu (Earth.Nullschool Style) -->
        <div id="sidebar-menu" class="sidebar">
            <div class="sidebar-header">
                <h2>üåç Earth</h2>
                <button id="sidebar-toggle" class="sidebar-toggle">‚ò∞</button>
            </div>
            
            <div class="sidebar-content">
                <!-- Data Layer Selection -->
                <div class="control-section">
                    <h3>Data Layer</h3>
                    <select id="data-layer" class="control-select">
                        <option value="pm25">PM2.5 Concentration</option>
                        <option value="pm10">PM10 Concentration</option>
                        <option value="none">None</option>
                    </select>
                </div>
                
                <!-- Overlay Selection -->
                <div class="control-section">
                    <h3>Overlay</h3>
                    <select id="overlay-type" class="control-select">
                        <option value="particles">Atmospheric Particles</option>
                        <option value="stations">Monitoring Stations</option>
                        <option value="heatmap">Heatmap</option>
                        <option value="none">None</option>
                    </select>
                </div>
                
                <!-- Projection -->
                <div class="control-section">
                    <h3>Projection</h3>
                    <select id="projection" class="control-select">
                        <option value="orthographic">Orthographic (3D)</option>
                        <option value="equirectangular">Equirectangular (Flat)</option>
                    </select>
                </div>
                
                <!-- Time Control -->
                <div class="control-section">
                    <h3>Time Period</h3>
                    <div class="time-display">
                        <div class="time-label">Current Year</div>
                        <div class="time-value" id="current-year">2021</div>
                    </div>
                </div>
                
                <!-- Year Slider -->
                <div class="control-section">
                    <h3>Historical Data</h3>
                    <input type="range" id="year-slider" class="time-slider" 
                           min="0" max="4" value="4" step="1">
                    <div style="display: flex; justify-content: space-between; font-size: 10px; color: rgba(255,255,255,0.5); margin-top: 8px;">
                        <span>1990</span>
                        <span>2000</span>
                        <span>2010</span>
                        <span>2019</span>
                        <span>2021</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Data Panel (Analysis Tools) -->
        <div id="data-panel" class="data-panel">
            <div class="panel-header">
                <h3>üìä Data Analysis</h3>
                <button id="panel-toggle" class="panel-close">√ó</button>
            </div>
            
            <div class="panel-content">
                <!-- Global Statistics -->
                <div class="stat-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üåç</div>
                        <div class="stat-info">
                            <div class="stat-value" id="global-pm25">--</div>
                            <div class="stat-label">Global Avg PM2.5</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìç</div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-stations">--</div>
                            <div class="stat-label">Active Stations</div>
                        </div>
                    </div>
                </div>
                
                <!-- Most Polluted Cities -->
                <div class="data-list">
                    <h4>üî¥ Most Polluted Regions</h4>
                    <div id="polluted-list" class="city-list">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Cleanest Cities -->
                <div class="data-list">
                    <h4>üü¢ Cleanest Regions</h4>
                    <div id="cleanest-list" class="city-list">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
                
                <!-- AQI Scale Reference -->
                <div class="data-list">
                    <h4>üìè AQI Scale (PM2.5)</h4>
                    <div style="background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(93, 188, 210, 0.2); border-radius: 10px; padding: 14px;">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 20px; height: 20px; background: #00e400; border-radius: 4px; margin-right: 10px;"></div>
                            <span style="font-size: 12px; color: rgba(255,255,255,0.9);">Good (0-12)</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 20px; height: 20px; background: #ffff00; border-radius: 4px; margin-right: 10px;"></div>
                            <span style="font-size: 12px; color: rgba(255,255,255,0.9);">Moderate (12-35)</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 20px; height: 20px; background: #ff7e00; border-radius: 4px; margin-right: 10px;"></div>
                            <span style="font-size: 12px; color: rgba(255,255,255,0.9);">Unhealthy (Sensitive) (35-55)</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 20px; height: 20px; background: #ff0000; border-radius: 4px; margin-right: 10px;"></div>
                            <span style="font-size: 12px; color: rgba(255,255,255,0.9);">Unhealthy (55-150)</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 20px; height: 20px; background: #99004c; border-radius: 4px; margin-right: 10px;"></div>
                            <span style="font-size: 12px; color: rgba(255,255,255,0.9);">Very Unhealthy (150-250)</span>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <div style="width: 20px; height: 20px; background: #7e0023; border-radius: 4px; margin-right: 10px;"></div>
                            <span style="font-size: 12px; color: rgba(255,255,255,0.9);">Hazardous (250+)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Info Panel (Click Details) -->
        <div id="info-panel" class="info-panel">
            <button id="close-info" class="close-btn">√ó</button>
            <div id="info-content"></div>
        </div>
        
        <!-- Bottom Controls -->
        <div id="bottom-controls" class="bottom-bar">
            <button id="play-pause" class="control-btn" title="Play Timeline">‚ñ∂</button>
            <div style="flex: 1; max-width: 600px; text-align: center;">
                <div style="font-size: 11px; color: rgba(255,255,255,0.6); margin-bottom: 4px; letter-spacing: 1px;">
                    HISTORICAL TIMELINE
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 8px; font-size: 12px; color: rgba(255,255,255,0.6);">
                <span id="fps-counter">60 FPS</span>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/globe.js"></script>
    
    <!-- Analytics (Optional) -->
    <script>
        // Track page view
        console.log('üåç AirLens Globe - Loaded');
        console.log('üìä Data Source: Our World in Data');
        console.log('üé® Design: Earth.Nullschool + Google Earth Style');
    </script>
</body>
</html>
